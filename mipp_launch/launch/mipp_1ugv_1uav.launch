<?xml version="1.0"?>
<launch>
  <arg name="run_gazebo"  default="false"/>
  <arg name="run_rviz"    default="false"/>
  <arg name="run_husky"   default="false"/>

  <node pkg="tf" type="static_transform_publisher" name="world_odom_link" args="0 0 0 0 0 0  /world /odom  100"/>

  <!--- 
    Run Gazebo 
  -->
  <!--- Taken from movebase_demo.launch and playpen.launch -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch"  if="$(arg run_gazebo)">
    <arg name="world_name"    value="$(find avoidance)/sim/worlds/simple_obstacle.world"/>
    <arg name="paused"        value="false"/>
    <arg name="use_sim_time"  value="true"/>
    <arg name="gui"           value="true"/>
    <arg name="headless"      value="true"/>
    <arg name="debug"         value="false"/>
  </include>

  <!--- 
    Run Rviz 
  -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find mipp_viz)/rviz/mipp_visualization.rviz" output="screen" if="$(arg run_rviz)"/>

  <!---
    Run OctoMap
  -->
  <include file="$(find octomap_server)/launch/octomap_mapping.launch"/>

  <!--- 
    Spawn single husky
  -->
  <include file="$(find mipp_launch)/launch/husky.launch" if="$(arg run_husky)"/>

  <!--- 
    Spawn single uav
  -->
  <include file="$(find mipp_launch)/launch/uav.launch">
    <arg name="uav_id"        value="0"/>
    <arg name="initial_x"     value="-2"/>
    <arg name="initial_y"     value="0"/>
    <arg name="run_rviz"      value="true"/>
    <arg name="run_gazebo"    value="true"/>
    <arg name="world_file_name"    value="simple_obstacle"/>
  </include>

</launch>
